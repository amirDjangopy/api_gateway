# پروژه Gateway API

## معرفی پروژه

این پروژه یک **API Gateway** ساده بر پایه Django REST Framework است که وظیفه هدایت درخواست‌ها به سرویس‌های میکروسرویس مختلف را بر عهده دارد.  
همچنین امکاناتی مثل نمایش مستندات Swagger هر سرویس و بررسی سلامت سرویس‌ها را فراهم می‌کند.

---

## ویژگی‌ها

- **پروکسی کردن درخواست‌ها** به سرویس‌های مختلف با توجه به مسیر درخواست
- دریافت و نمایش مستندات Swagger هر سرویس به صورت داینامیک
- چک کردن وضعیت سلامت (Health Check) سرویس‌ها
- پیکربندی سرویس‌ها در فایل تنظیمات برای انعطاف‌پذیری
- اجرا و مدیریت سرویس‌ها به کمک Docker و Docker Compose

---
## توضیح کلی درباره APIهای پروکسی و چک سلامت

در این پروژه، یک گیت‌وی مرکزی ساخته‌ایم که نقش واسط بین کلاینت‌ها (مثلاً فرانت‌اند) و سرویس‌های مختلف میکروسرویس‌ها را دارد. این گیت‌وی امکانات مهمی فراهم می‌کند که در ادامه به صورت کلی شرح داده می‌شود:

### 1. پروکسی کردن درخواست‌ها و نمایش مستندات سرویس‌ها  
کلاس `ProxyDocsAPIView` وظیفه دارد درخواست‌های مربوط به مستندات API هر سرویس را دریافت کند و به صورت داینامیک آن مستندات را از سرویس مربوطه بگیرد و به کلاینت برگرداند.  
با این روش:  
- نیازی نیست کلاینت مستقیم به هر سرویس وصل شود.  
- مستندات همه سرویس‌ها به صورت متمرکز در یک نقطه قابل دسترس هستند.  
- نگهداری و تغییر آدرس سرویس‌ها فقط در تنظیمات گیت‌وی انجام می‌شود و کلاینت‌ها نیازی به تغییر ندارند.

### 2. بررسی سلامت سرویس‌ها (Health Check)  
کلاس `HealthCheckAPIView` به صورت دوره‌ای وضعیت سرویس‌های مختلف را بررسی می‌کند و نتیجه را به صورت گزارش سلامت به کلاینت‌ها یا سیستم‌های مانیتورینگ ارائه می‌دهد.  
این موضوع کمک می‌کند:  
- سریع متوجه شوید که کدام سرویس‌ها فعال یا غیرفعال هستند.  
- بهبود پایداری سیستم با امکان انجام اقدامات لازم روی سرویس‌های مشکل‌دار.  
- افزایش اطمینان از صحت عملکرد کل سامانه.

### 3. ارتباط فرانت‌اند با این سیستم  
فرانت‌اند به جای ارتباط مستقیم با هر میکروسرویس، فقط با گیت‌وی (این سرویس مرکزی) ارتباط برقرار می‌کند.  
مزایا:  
- کاهش پیچیدگی در سمت فرانت‌اند  
- کنترل متمرکز بر درخواست‌ها و پاسخ‌ها  
- امکان پیاده‌سازی امنیت و احراز هویت فقط در گیت‌وی  
- قابلیت مقیاس‌پذیری و مدیریت بهتر شبکه

فرانت‌اند با استفاده از URLهای مشخص شده در گیت‌وی، داده‌های مورد نیاز را از سرویس‌ها می‌گیرد، مستندات را مشاهده می‌کند و وضعیت سلامت کل سیستم را نمایش می‌دهد.

---

### جمع‌بندی کلی  
با پیاده‌سازی این APIها و ساختار گیت‌وی، ما:  
- یک نقطه ورود متمرکز برای کل سیستم میکروسرویس‌ها ایجاد کرده‌ایم  
- امنیت، مدیریت، و مانیتورینگ سیستم را بهبود داده‌ایم  
- کار با چندین سرویس مختلف را برای فرانت‌اند ساده کرده‌ایم  
- امکان مقیاس‌پذیری و نگهداری آسان‌تر کل سامانه را فراهم کرده‌ایم.

این روش معماری بسیار متداول و استاندارد در سیستم‌های مبتنی بر میکروسرویس است و پایه‌ای برای توسعه سیستم‌های بزرگ و قابل اعتماد محسوب می‌شود.

---

## ساختار پروژه

├── db.sqlite3
├── gateway
│   ├── asgi.py
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
├── manage.py
└── proxy
├── apps.py
├── urls.py
└── views.py
├── Dockerfile
├── docker-compose.yml
├── run.sh

yaml
Copy
Edit

---

## راهنمای استفاده

### پیش‌نیازها

- نصب Docker و Docker Compose  
- تنظیم آدرس سرویس‌ها در `gateway/settings.py` در بخش `SERVICE_MAP` به شکل زیر:

```python
SERVICE_MAP = {
    "auth": "http://auth-service:8000",
    "user": "http://user-service:8001",
    # سایر سرویس‌ها
}